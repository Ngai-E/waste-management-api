{"openapi":"3.0.0","paths":{"/api/v1/auth/register":{"post":{"operationId":"AuthController_register","summary":"Register a new household user","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterHouseholdDto"}}}},"responses":{"201":{"description":"User registered successfully"},"409":{"description":"User already exists"}},"tags":["Authentication"]}},"/api/v1/auth/login":{"post":{"operationId":"AuthController_login","summary":"Login with phone and password","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"Login successful"},"401":{"description":"Invalid credentials"}},"tags":["Authentication"]}},"/api/v1/auth/refresh":{"post":{"operationId":"AuthController_refresh","summary":"Refresh access token","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenDto"}}}},"responses":{"200":{"description":"Token refreshed successfully"},"401":{"description":"Invalid refresh token"}},"tags":["Authentication"]}},"/api/v1/auth/logout":{"post":{"operationId":"AuthController_logout","summary":"Logout user","parameters":[],"responses":{"200":{"description":"Logged out successfully"}},"tags":["Authentication"],"security":[{"bearer":[]}]}},"/api/v1/auth/change-password":{"patch":{"operationId":"AuthController_changePassword","summary":"Change user password","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordDto"}}}},"responses":{"200":{"description":"Password changed successfully"},"400":{"description":"Invalid current password"}},"tags":["Authentication"],"security":[{"bearer":[]}]}},"/api/v1/users":{"get":{"operationId":"UsersController_findAll","summary":"Get all users (Admin only)","parameters":[{"name":"page","required":false,"in":"query","schema":{"minimum":1,"default":1,"type":"number"}},{"name":"limit","required":false,"in":"query","schema":{"minimum":1,"maximum":100,"default":10,"type":"number"}},{"name":"isActive","required":false,"in":"query","schema":{"type":"boolean"}},{"name":"role","required":false,"in":"query","schema":{"enum":["HOUSEHOLD","AGENT","ADMIN","HYSACAM","COUNCIL"],"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Users"],"security":[{"bearer":[]}]}},"/api/v1/users/{id}":{"get":{"operationId":"UsersController_findOne","summary":"Get user by ID (Admin only)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Users"],"security":[{"bearer":[]}]}},"/api/v1/users/{id}/status":{"patch":{"operationId":"UsersController_updateStatus","summary":"Update user status (Admin only)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Users"],"security":[{"bearer":[]}]}},"/api/v1/households/me":{"get":{"operationId":"HouseholdsController_getMyProfile","summary":"Get my household profile","parameters":[],"responses":{"200":{"description":""}},"tags":["Households"],"security":[{"bearer":[]}]},"put":{"operationId":"HouseholdsController_updateMyProfile","summary":"Update my household profile","parameters":[],"responses":{"200":{"description":""}},"tags":["Households"],"security":[{"bearer":[]}]}},"/api/v1/households/me/stats":{"get":{"operationId":"HouseholdsController_getMyStats","summary":"Get my household statistics","parameters":[],"responses":{"200":{"description":""}},"tags":["Households"],"security":[{"bearer":[]}]}},"/api/v1/agents/me":{"get":{"operationId":"AgentsController_getMyProfile","summary":"Get my agent profile","parameters":[],"responses":{"200":{"description":""}},"tags":["Agents"],"security":[{"bearer":[]}]},"put":{"operationId":"AgentsController_updateMyProfile","summary":"Update my agent profile","parameters":[],"responses":{"200":{"description":""}},"tags":["Agents"],"security":[{"bearer":[]}]}},"/api/v1/agents/me/stats":{"get":{"operationId":"AgentsController_getMyStats","summary":"Get my agent statistics","parameters":[],"responses":{"200":{"description":""}},"tags":["Agents"],"security":[{"bearer":[]}]}},"/api/v1/agents/{id}/kyc":{"patch":{"operationId":"AgentsController_updateKycStatus","summary":"Update agent KYC status (Admin only)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Agents"],"security":[{"bearer":[]}]}},"/api/v1/pickups":{"post":{"operationId":"PickupsController_create","summary":"Create pickup request (Household)","parameters":[],"responses":{"201":{"description":""}},"tags":["Pickups"],"security":[{"bearer":[]}]},"get":{"operationId":"PickupsController_findAll","summary":"Get all pickups","parameters":[{"name":"scope","required":false,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Pickups"],"security":[{"bearer":[]}]}},"/api/v1/pickups/available":{"get":{"operationId":"PickupsController_findAvailable","summary":"Get available pickups (Agent)","parameters":[],"responses":{"200":{"description":""}},"tags":["Pickups"],"security":[{"bearer":[]}]}},"/api/v1/pickups/{id}":{"get":{"operationId":"PickupsController_findOne","summary":"Get pickup by ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Pickups"],"security":[{"bearer":[]}]}},"/api/v1/pickups/{id}/accept":{"patch":{"operationId":"PickupsController_accept","summary":"Accept pickup request (Agent)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Pickups"],"security":[{"bearer":[]}]}},"/api/v1/pickups/{id}/start":{"patch":{"operationId":"PickupsController_start","summary":"Start pickup (Agent)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Pickups"],"security":[{"bearer":[]}]}},"/api/v1/pickups/{id}/complete":{"patch":{"operationId":"PickupsController_complete","summary":"Complete pickup (Agent)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Pickups"],"security":[{"bearer":[]}]}},"/api/v1/pickups/{id}/cancel":{"patch":{"operationId":"PickupsController_cancel","summary":"Cancel pickup (Household)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Pickups"],"security":[{"bearer":[]}]}},"/api/v1/pickups/{id}/rating":{"post":{"operationId":"PickupsController_rate","summary":"Rate completed pickup (Household)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Pickups"],"security":[{"bearer":[]}]}},"/api/v1/alerts":{"post":{"operationId":"AlertsController_create","summary":"Create alert","parameters":[],"responses":{"201":{"description":""}},"tags":["Alerts"],"security":[{"bearer":[]}]},"get":{"operationId":"AlertsController_findAll","summary":"Get all alerts","parameters":[{"name":"type","required":false,"in":"query","schema":{"type":"string"}},{"name":"status","required":false,"in":"query","schema":{"enum":["OPEN","IN_PROGRESS","RESOLVED"],"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Alerts"],"security":[{"bearer":[]}]}},"/api/v1/alerts/{id}":{"get":{"operationId":"AlertsController_findOne","summary":"Get alert by ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Alerts"],"security":[{"bearer":[]}]},"patch":{"operationId":"AlertsController_updateStatus","summary":"Update alert status (Admin/HYSACAM/Council)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Alerts"],"security":[{"bearer":[]}]}},"/api/v1/bins":{"post":{"operationId":"BinsController_create","summary":"Create bin (Admin only)","parameters":[],"responses":{"201":{"description":""}},"tags":["Bins"],"security":[{"bearer":[]}]},"get":{"operationId":"BinsController_findAll","summary":"Get all bins","parameters":[],"responses":{"200":{"description":""}},"tags":["Bins"]}},"/api/v1/bins/{id}":{"get":{"operationId":"BinsController_findOne","summary":"Get bin by ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Bins"]},"patch":{"operationId":"BinsController_update","summary":"Update bin (Admin/HYSACAM)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Bins"],"security":[{"bearer":[]}]}},"/api/v1/subscriptions":{"get":{"operationId":"SubscriptionsController_findAll","summary":"Get subscriptions","parameters":[{"name":"householdId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Subscriptions"],"security":[{"bearer":[]}]},"post":{"operationId":"SubscriptionsController_create","summary":"Create subscription (Admin only)","parameters":[],"responses":{"201":{"description":""}},"tags":["Subscriptions"],"security":[{"bearer":[]}]}},"/api/v1/education":{"get":{"operationId":"EducationController_findAll","summary":"Get educational content","parameters":[{"name":"audience","required":true,"in":"query","schema":{"type":"string"}},{"name":"language","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Education"]},"post":{"operationId":"EducationController_create","summary":"Create educational content (Admin only)","parameters":[],"responses":{"201":{"description":""}},"tags":["Education"],"security":[{"bearer":[]}]}},"/api/v1/education/{id}":{"get":{"operationId":"EducationController_findOne","summary":"Get educational content by ID","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Education"]},"put":{"operationId":"EducationController_update","summary":"Update educational content (Admin only)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Education"],"security":[{"bearer":[]}]},"delete":{"operationId":"EducationController_remove","summary":"Delete educational content (Admin only)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Education"],"security":[{"bearer":[]}]}},"/api/v1/surveys":{"get":{"operationId":"SurveysController_findAll","summary":"Get all surveys","parameters":[{"name":"targetGroup","required":true,"in":"query","schema":{"type":"string"}},{"name":"active","required":true,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":""}},"tags":["Surveys"]},"post":{"operationId":"SurveysController_create","summary":"Create survey (Admin only)","parameters":[],"responses":{"201":{"description":""}},"tags":["Surveys"],"security":[{"bearer":[]}]}},"/api/v1/surveys/{id}/responses":{"post":{"operationId":"SurveysController_submitResponse","summary":"Submit survey response","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""}},"tags":["Surveys"],"security":[{"bearer":[]}]},"get":{"operationId":"SurveysController_getResponses","summary":"Get survey responses (Admin/HYSACAM/Council)","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Surveys"],"security":[{"bearer":[]}]}},"/api/v1/stats/overview":{"get":{"operationId":"StatsController_getOverview","summary":"Get platform overview statistics","parameters":[],"responses":{"200":{"description":""}},"tags":["Statistics"],"security":[{"bearer":[]}]}},"/api/v1/stats/pickups":{"get":{"operationId":"StatsController_getPickupStats","summary":"Get pickup statistics","parameters":[{"name":"from","required":true,"in":"query","schema":{"type":"string"}},{"name":"to","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Statistics"],"security":[{"bearer":[]}]}},"/api/v1/stats/agents/performance":{"get":{"operationId":"StatsController_getAgentPerformance","summary":"Get agent performance statistics","parameters":[],"responses":{"200":{"description":""}},"tags":["Statistics"],"security":[{"bearer":[]}]}},"/api/v1/files/upload":{"post":{"operationId":"UploadController_uploadFile","summary":"Upload file","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}}}}}},"responses":{"201":{"description":""}},"tags":["Files"],"security":[{"bearer":[]}]}},"/api/v1/health":{"get":{"operationId":"HealthController_check","summary":"Health check","parameters":[],"responses":{"200":{"description":"The Health Check is successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}},"503":{"description":"The Health Check is not successful","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"error"},"info":{"type":"object","example":{"database":{"status":"up"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"error":{"type":"object","example":{"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true},"nullable":true},"details":{"type":"object","example":{"database":{"status":"up"},"redis":{"status":"down","message":"Could not connect"}},"additionalProperties":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}},"additionalProperties":true}}}}}}}},"tags":["Health"]}}},"info":{"title":"Waste Management API","description":"Multi-role waste management platform for Cameroon","version":"1.0","contact":{}},"tags":[{"name":"Authentication","description":""},{"name":"Users","description":""},{"name":"Households","description":""},{"name":"Agents","description":""},{"name":"Pickups","description":""},{"name":"Alerts","description":""},{"name":"Bins","description":""},{"name":"Subscriptions","description":""},{"name":"Education","description":""},{"name":"Surveys","description":""},{"name":"Statistics","description":""},{"name":"Files","description":""},{"name":"Health","description":""}],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"RegisterHouseholdDto":{"type":"object","properties":{"name":{"type":"string","example":"John Doe"},"email":{"type":"string","example":"john@example.com"},"phone":{"type":"string","example":"+237670000000"},"password":{"type":"string","example":"password123","minLength":6},"address":{"type":"string","example":"123 Main St, Douala"},"quarter":{"type":"string","example":"Bonamoussadi"}},"required":["name","phone","password"]},"LoginDto":{"type":"object","properties":{"phone":{"type":"string","example":"+237670000000"},"password":{"type":"string","example":"password123"}},"required":["phone","password"]},"RefreshTokenDto":{"type":"object","properties":{"refreshToken":{"type":"string"}},"required":["refreshToken"]},"ChangePasswordDto":{"type":"object","properties":{"currentPassword":{"type":"string"},"newPassword":{"type":"string","minLength":6}},"required":["currentPassword","newPassword"]}}}}